{% extends "base.html" %}
{% block title %}Редактирование категорий {{ shop_name }}{% endblock %}
{% block content %}
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">

      <h2>Редактирование категорий {{ shop_name }}</h2>

      <div class="table-responsive">
        <table class="table table-striped table-sm">


          <tbody>
          {% for c in categories %}
          <form action="" method="post" enctype="multipart/form-data" novalidate>

            <tr>
              <td>#</td>
              <td><button type="button" class="btn btn-light btn-sm"><a href='{{ c["cat_link"] }}' target="_blank">Посмотреть на сайте</a></button></td>
              <td>{{ form.cat_name(class_="cat_autocomplete", size=32, value=c["cat_name"]) }}{{ form.cat_link(value=c["cat_link"], type="hidden") }}</td>
              <td>{{ form.submit() }}</td>
            </tr>
          </form>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </main>
<script>
    $(function() {
        $.ajax({
            url: '{{ url_for("autocomplete") }}'
            }).done(function (data){
                $('.cat_autocomplete').autocomplete({
                    source: data,
                    minLength: 2
                });
            });
        });
</script>

{% endblock %}